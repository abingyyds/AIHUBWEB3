version: "1.3.1"
cache: true

interface:
  modelSelect: true
  parameters: true
  sidePanel: true
  presets: true
  prompts: true
  bookmarks: true
  multiConvo: true
  agents: true
  webSearch: true
  fileSearch: true
  fileCitations: true
  runCode: true
  marketplace:
    use: true
  mcpServers:
    placeholder: "MCP Servers"
  privacyPolicy:
    externalUrl: "${PRIVACY_POLICY_URL}"
    openNewTab: true
  termsOfService:
    externalUrl: "${TOS_URL}"
    openNewTab: true
  customWelcome: "Welcome, {{user.name}}."
  peoplePicker:
    users: true
    groups: true
    roles: true

registration:
  socialLogins: ["github", "google", "discord", "openid", "facebook"]

fileConfig:
  serverFileSizeLimit: 200
  avatarSizeLimit: 5
  endpoints:
    default:
      fileLimit: 20
      fileSizeLimit: 50
      totalSizeLimit: 200
      supportedMimeTypes:
        - "image/.*"
        - "application/pdf"
        - "text/.*"
        - "application/json"
        - "application/zip"
        - "application/vnd.openxmlformats-officedocument.*"
        - "application/msword"
        - "application/vnd.ms-excel"
        - "application/vnd.ms-powerpoint"
    assistants:
      fileLimit: 20
      fileSizeLimit: 50
      totalSizeLimit: 200
      supportedMimeTypes: ["image/.*", "application/pdf", "text/.*"]
    agents:
      fileLimit: 20
      fileSizeLimit: 50
      totalSizeLimit: 200
      supportedMimeTypes: ["image/.*", "application/pdf", "text/.*"]

actions:
  allowedDomains:
    - "librechat.ai"
    - "github.com"
    - "api.github.com"
    - "google.com"
    - "serper.dev"
    - "openweathermap.org"
    - "docs.firecrawl.dev"
    - "bfl.ml"

memory:
  disabled: false
  personalize: true
  messageWindowSize: 30
  tokenLimit: 8000
  charLimit: 30000
  validKeys: ["profile", "preferences", "projects", "glossary"]

ocr:
  enabled: true

webSearch:
  searchProvider: "serper"
  serperApiKey: "${SERPER_API_KEY}"
  searxngInstanceUrl: "${SEARXNG_INSTANCE_URL}"
  searxngApiKey: "${SEARXNG_API_KEY}"
  scraperProvider: "firecrawl"
  firecrawlApiKey: "${FIRECRAWL_API_KEY}"
  firecrawlApiUrl: "${FIRECRAWL_API_URL}"
  firecrawlVersion: "${FIRECRAWL_VERSION}"
  rerankerType: "jina"
  jinaApiKey: "${JINA_API_KEY}"
  jinaApiUrl: "${JINA_API_URL}"
  cohereApiKey: "${COHERE_API_KEY}"
  scraperTimeout: 7500
  safeSearch: 1

speech:
  speechTab:
    conversationMode: true
    advancedMode: true
    speechToText:
      engineSTT: "external"
      languageSTT: "English (US)"
      autoTranscribeAudio: true
      decibelValue: -45
      autoSendText: 0
    textToSpeech:
      engineTTS: "external"
      voice: "alloy"
      languageTTS: "en"
      automaticPlayback: true
      playbackRate: 1.0
      cacheTTS: true

  stt:
    openai:
      url: "${STT_OPENAI_URL}"
      apiKey: "${STT_API_KEY}"
      model: "${STT_MODEL}"
    azureOpenAI:
      instanceName: "${AZURE_STT_INSTANCE}"
      apiKey: "${AZURE_STT_API_KEY}"
      deploymentName: "${AZURE_STT_DEPLOYMENT}"
      apiVersion: "${AZURE_STT_API_VERSION}"

  tts:
    openai:
      url: "${TTS_OPENAI_URL}"
      apiKey: "${TTS_API_KEY}"
      model: "${TTS_MODEL}"
      voice: "${TTS_VOICE}"
      voices:
        - "alloy"
        - "echo"
        - "fable"
        - "onyx"
        - "nova"
        - "shimmer"

mcpServers: {}

endpoints:
  assistants:
    disableBuilder: false
    pollIntervalMs: 2000
    timeoutMs: 180000
    capabilities: ["code_interpreter", "retrieval", "actions", "tools", "image_vision"]

  # 方案 B-2：allowedProviders 与 custom.name 完全一致（并伪装成内置 provider 以显示图标）
  agents:
    disableBuilder: false
    recursionLimit: 50
    maxRecursionLimit: 100
    allowedProviders:
      - openAI        # 内置 OpenAI provider（你已有 endpoints.openAI）
      - xai           # Grok 伪装（若你的前端版本支持 xAI 图标）
      - anthropic     # Claude 伪装
      - deepseek      # DeepSeek 伪装
      - google        # Gemini 伪装
    capabilities: ["execute_code", "file_search", "actions", "tools", "artifacts", "context", "ocr", "chain", "web_search"]

  # 内置 openAI provider（有 OpenAI 图标 + 内置能力路径）
  openAI:
    apiKey: "${LITELLM_VIRTUAL_KEY}"
    baseURL: "${LITELLM_BASE_URL}"
    models:
      default:
        - "gpt-4.1"
        - "gpt-5.1"
        - "gpt-5-pro"
        - "gpt-5.2"

  # custom 端点：把 name 改成内置 provider key（用于触发图标）
  custom:
    # Grok -> xai
    - name: "xai"
      apiKey: "${LITELLM_VIRTUAL_KEY}"
      baseURL: "${LITELLM_BASE_URL}"
      models:
        fetch: false
        default:
          - "grok-4.1"
          - "grok-4.1-thinking"
      titleConvo: true
      modelDisplayLabel: "Grok"

    # Claude -> anthropic
    - name: "anthropic"
      apiKey: "${LITELLM_VIRTUAL_KEY}"
      baseURL: "${LITELLM_BASE_URL}"
      models:
        fetch: false
        default:
          - "claude-sonnet-4-5-thinking"
          - "claude-opus-4-5-thinking"
      titleConvo: true
      modelDisplayLabel: "Claude"

    # DeepSeek -> deepseek
    - name: "deepseek"
      apiKey: "${LITELLM_VIRTUAL_KEY}"
      baseURL: "${LITELLM_BASE_URL}"
      models:
        fetch: false
        default:
          - "DeepSeek-V3.2"
          - "DeepSeek-V3.2-search"
          - "DeepSeek-V3.2-thinking"
          - "DeepSeek-V3.2-thinking-search"
      titleConvo: true
      modelDisplayLabel: "DeepSeek"

    # Gemini -> google
    - name: "google"
      apiKey: "${LITELLM_VIRTUAL_KEY}"
      baseURL: "${LITELLM_BASE_URL}"
      models:
        fetch: false
        default:
          - "gemini-3-pro-preview"
      titleConvo: true
      modelDisplayLabel: "Gemini"
